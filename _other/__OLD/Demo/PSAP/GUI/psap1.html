<!DOCTYPE html>
<html>
<head>
	<meta charset="UTF-8">
	<title>PSAP Web Page</title>
	<style>
		body {
			background-color: #f2f2f2;
			font-family: Arial, sans-serif;
			padding: 20px;
		}
		h1 {
			font-size: 24px;
			font-weight: bold;
			margin-bottom: 20px;
		}
		label {
			display: block;
			margin-bottom: 10px;
			font-size: 18px;
			font-weight: bold;
		}
		input[type="text"] {
			width: 100%;
			padding: 10px;
			font-size: 16px;
			border-radius: 5px;
			border: none;
			box-shadow: inset 0 1px 3px rgba(0, 0, 0, 0.1);
		}
		button {
			background-color: #4CAF50;
			color: white;
			padding: 10px 20px;
			font-size: 16px;
			border: none;
			border-radius: 5px;
			cursor: pointer;
		}
		button:hover {
			background-color: #3e8e41;
		}
		#info {
			margin-top: 20px;
			font-size: 18px;
		}
	</style>
    <style>

		#map {
			height: 400px;
			width: 100%;
		}
	</style>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/leaflet.js"></script>
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/leaflet.css"/>
</head>
<body>
    <h1>Public Safety Answering Point</h1>
    <form>
   <label for="msd">MSD ID:</label>
      <input type="text" id="msd" readonly>
    <label for="vechile">Vehicle number:</label>
      <input type="text" id="vehcile" readonly>
    <label for="activate">activation:</label>
      <input type="text" id="activate" readonly>
    <label for="call">Test Call:</label>
        <input type="text" id="call" readonly>
		<label for="position">Position Trusted:</label>
				<input type="text" id="position" readonly>
    <label for="type">Vehcile Type:</label>
        <input type="text" id="type" readonly>
		<label for="tank">Propulsion type:</label>
				<input type="text" id="tank" readonly>
    <label for="time">Timestamp:</label>
        <input type="text" id="time" readonly>
    <label for="latitude">position latitude:</label>
        <input type="text" id="latitude" readonly>
    <label for="longitude">position longitude:</label>
        <input type="text" id="longitude" readonly>
		<label for="direction">Vehicle Direction:</label>
				<input type="text" id="direction" readonly>
		<label for="passengers">Number of Passengers:</label>
				<input type="text" id="passengers" readonly>

        <button type="button" onclick="loadData()">Load Data</button>
    </form>
    <div id="info"></div>
	<script>
		function loadData() {
			// Prompt user to select file
			const fileInput = document.createElement("input");
			fileInput.type = "file";
			fileInput.accept = ".txt";
			fileInput.style.display = "none";
			fileInput.onchange = function(event) {
				const file = event.target.files[0];
				const reader = new FileReader();
				reader.onload = function(event) {
					const contents = event.target.result;
					displayData(contents);
				};
				reader.readAsText(file);
			};
			fileInput.click();
		}

		function displayData(contents) {
			// Display data in labels
			const lines = contents.split("\n");
			const msd = lines[0].trim();
			const vehcile = lines[1].trim();
			const activate = lines[2].trim();
      		const call = lines[3].trim();
			const position = lines[4].trim();
    		const type = lines[5].trim();
			const tank = lines[6].trim();
      		const time = lines[7].trim();
       		const latitude = lines[8].trim();
      		const longitude = lines[9].trim();
			const direction = lines[10].trim();
			const passengers = lines[11].trim();


      // const name = lines[0].trim();
      // const name = lines[0].trim();
      // const name = lines[0].trim();
      // const name = lines[0].trim();


			document.getElementById("msd").value = msd;
			document.getElementById("vehcile").value = vehcile;
			document.getElementById("activate").value = activate;
      		document.getElementById("call").value = call;
			document.getElementById("position").value = position;
      		document.getElementById("type").value = type;
			document.getElementById("tank").value = tank;
      		document.getElementById("time").value = time;

      		document.getElementById("latitude").value = latitude;
      		document.getElementById("longitude").value = longitude;
			document.getElementById("direction").value = direction;
			document.getElementById("passengers").value = [passengers];

		}
	</script>
    <script>
		function initMap() {
			var inputLat = document.getElementById("latitude");
			var inputLng = document.getElementById("longitude");
			var sanFrancisco = [37.7749, -122.4194];
			var map = L.map('map').setView(sanFrancisco, 12);
			L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
			    attribution: 'Map data Â© <a href="https://www.openstreetmap.org/">OpenStreetMap</a> contributors',
			    maxZoom: 18,
			    tileSize: 512,
			    zoomOffset: -1,
			    accessToken: 'your.mapbox.access.token'
			}).addTo(map);
			var marker = L.marker(sanFrancisco).addTo(map);
			document.getElementById("submit").addEventListener("click", function(e) {
				e.preventDefault();
				var lat = parseFloat(inputLat.value);
				var lng = parseFloat(inputLng.value);
				if (isNaN(lat) || isNaN(lng)) {
					alert("Please enter valid coordinates.");
					return;
				}
				var location = [lat, lng];
				map.setView(location, 12);
				marker.setLatLng(location);
			});
		}
	</script>
    <body onload="initMap()">
        <h1>Map</h1>
        <form>

            <input type="submit" id="submit" value="Show Location">
        </form>
        <div id="map"></div>
    </body>
    </html>
